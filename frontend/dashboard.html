<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fest Dashboard</title>
    
    <!-- Auth Script: Must run before body renders to prevent page flash -->
    <script src="js/auth.js"></script>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    
    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/2.0.8/css/dataTables.bootstrap5.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-light text-dark">

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm" style="border-bottom: 1px solid #DEE2E6;">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Fest Dashboard</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" data-tab="participants">Participants</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-tab="colleges">Colleges</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-tab="events">Events</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-tab="accommodation">Accommodation</a>
                    </li>
                </ul>
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item">
                        <span id="welcome-user" class="navbar-text me-3"></span>
                    </li>
                    <li class="nav-item">
                        <button id="logout-button" class="btn btn-outline-primary">Logout</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container-fluid mt-4">
        
        <!-- Participants Tab -->
        <div id="participants-tab" class="tab-content">
            <h2>Participants</h2>
            
            <!-- Filters Card -->
            <div class="card bg-custom-card text-dark p-3 mb-3">
                <h5>Filters</h5>
                <form id="participants-filter-form" class="row g-3">
                    <div class="col-md-3">
                        <label for="p-college" class="form-label">College Name</label>
                        <input type="text" class="form-control" id="p-college" placeholder="Enter college name">
                    </div>
                    <div class="col-md-2">
                        <label for="p-club-id" class="form-label">Club ID</label>
                        <input type="number" class="form-control" id="p-club-id" placeholder="Enter club ID">
                    </div>
                    <div class="col-md-2">
                        <label for="p-gender" class="form-label">Gender</label>
                        <select class="form-select" id="p-gender">
                            <option value="">All</option>
                            <option value="MALE">Male</option>
                            <option value="FEMALE">Female</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label for="p-state" class="form-label">State</label>
                        <input type="text" class="form-control" id="p-state" placeholder="Enter state">
                    </div>
                    <div class="col-md-2">
                        <label for="p-city" class="form-label">City</label>
                        <input type="text" class="form-control" id="p-city" placeholder="Enter city">
                    </div>
                    <div class="col-md-2">
                        <label for="p-event-id" class="form-label">Event ID</label>
                        <input type="number" class="form-control" id="p-event-id" placeholder="Enter event ID">
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Apply Filters</button>
                        <button type="button" class="btn btn-secondary" id="p-clear-filters">Clear Filters</button>
                    </div>
                </form>
            </div>

            <!-- Results Table -->
            <div class="card bg-custom-card text-dark p-3">
                <table id="participants-table" class="table table-striped" style="width:100%">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th>Gender</th>
                            <th>Merch Size</th>
                            <th>College ID</th>
                            <th>Club ID</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Colleges Tab -->
        <div id="colleges-tab" class="tab-content" style="display: none;">
            <h2>Colleges</h2>
            
            <!-- Filters Card -->
            <div class="card bg-custom-card text-dark p-3 mb-3">
                <h5>Filters</h5>
                <form id="colleges-filter-form" class="row g-3">
                    <div class="col-md-4">
                        <label for="c-city" class="form-label">City</label>
                        <input type="text" class="form-control" id="c-city" placeholder="Enter city">
                    </div>
                    <div class="col-md-4">
                        <label for="c-state" class="form-label">State</label>
                        <input type="text" class="form-control" id="c-state" placeholder="Enter state">
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Apply Filters</button>
                        <button type="button" class="btn btn-secondary" id="c-clear-filters">Clear Filters</button>
                    </div>
                </form>
            </div>

            <!-- Results Table -->
            <div class="card bg-custom-card text-dark p-3">
                <table id="colleges-table" class="table table-striped" style="width:100%">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>City</th>
                            <th>State</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Events Tab -->
        <div id="events-tab" class="tab-content" style="display: none;">
            <h2>Events</h2>
            
            <!-- Filters Card -->
            <div class="card bg-custom-card text-dark p-3 mb-3">
                <h5>Filters</h5>
                <form id="events-filter-form" class="row g-3">
                    <div class="col-md-3">
                        <label for="e-category" class="form-label">Category</label>
                        <select class="form-select" id="e-category">
                            <option value="">All</option>
                            <option value="technical">Technical</option>
                            <option value="cultural">Cultural</option>
                            <option value="managerial">Managerial</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label for="e-venue" class="form-label">Venue</label>
                        <input type="text" class="form-control" id="e-venue" placeholder="Enter venue">
                    </div>
                    <div class="col-md-3">
                        <label for="e-date" class="form-label">Date</label>
                        <input type="date" class="form-control" id="e-date">
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Apply Filters</button>
                        <button type="button" class="btn btn-secondary" id="e-clear-filters">Clear Filters</button>
                    </div>
                </form>
            </div>

            <!-- Results Table -->
            <div class="card bg-custom-card text-dark p-3">
                <table id="events-table" class="table table-striped" style="width:100%">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Fest ID</th>
                            <th>Category</th>
                            <th>Venue</th>
                            <th>Date</th>
                            <th>Time</th>
                            <th>Max Team Size</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Accommodation Tab -->
        <div id="accommodation-tab" class="tab-content" style="display: none;">
            
            <!-- Rooms List View -->
            <div id="rooms-list-view">
                <h2>Accommodation - Room Occupancy</h2>
                
                <div class="card bg-custom-card text-dark p-3">
                    <table id="rooms-table" class="table table-striped" style="width:100%">
                        <thead>
                            <tr>
                                <th>Room ID</th>
                                <th>Building</th>
                                <th>Room No</th>
                                <th>Gender</th>
                                <th>Max Capacity</th>
                                <th>Current Occupancy</th>
                                <th>Occupancy %</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Room Details View (initially hidden) -->
            <div id="room-details-view" style="display: none;">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h2>Room Details</h2>
                    <button id="back-to-rooms-btn" class="btn btn-secondary">‚Üê Back to Rooms</button>
                </div>
                
                <div class="card bg-custom-card text-dark p-3 mb-3">
                    <h5 id="room-details-header">
                        <!-- Room info will be inserted here -->
                    </h5>
                </div>

                <div class="card bg-custom-card text-dark p-3">
                    <h5>Participants in this Room</h5>
                    <table id="participants-in-room-table" class="table table-striped" style="width:100%">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Gender</th>
                                <th>Merch Size</th>
                                <th>College ID</th>
                                <th>Club ID</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

        </div>

    </main>

    <!-- jQuery (required for DataTables) -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    
    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    
    <!-- DataTables JS -->
    <script type="text/javascript" src="https://cdn.datatables.net/2.0.8/js/dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/2.0.8/js/dataTables.bootstrap5.min.js"></script>

    <!-- Module Scripts - Load in order -->
    <script src="js/participants-tab.js"></script>
    <script src="js/colleges-tab.js"></script>
    <script src="js/events-tab.js"></script>
    <script src="js/accommodation-tab.js"></script>
    
    <!-- Main Dashboard Controller -->
    <script src="js/dashboard.js"></script>
</body>
</html>